<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE LAB // JONI BOIS A-RT</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Metal+Mania&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Cursor & Preloader (Should be global but added here for consistency) -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <nav>
        <div class="container nav-content">
            <div class="nav-logo">JONI BOIS A-RT <span style="font-size: 0.5em; color: var(--accent-neon);">//
                    LAB</span></div>
            <div class="nav-links">
                <a href="index.html">HOME</a>
                <a href="index.html#collection">COLLECTION</a>
                <div class="cart-icon">CART (0)</div>
            </div>
        </div>
    </nav>

    <div class="lab-container">
        <!-- Visualizer -->
        <div class="lab-visualizer">
            <div class="digital-dye-container">
                <div id="dye-layer" class="dye-overlay dye-white"></div>
                <img id="lab-base-image" src="./assets/origins_white_tee_front.png" alt="Base Product">
            </div>

            <!-- Interactive Zones -->
            <div id="zone-chest" class="overlay-zone active" data-zone="chest"></div>
            <div id="zone-arm-left" class="overlay-zone" data-zone="arm"></div>
        </div>

        <!-- Controls -->
        <div class="lab-controls">
            <div class="control-group">
                <h3>1. BASE PRODUCT</h3>
                <div class="option-grid">
                    <button class="lab-btn selected" onclick="changeBase('tee-white')">TEE (W)</button>
                    <button class="lab-btn" onclick="changeBase('tee-black')">TEE (B)</button>
                    <button class="lab-btn" onclick="changeBase('hoodie')">HOODIE</button>
                </div>
            </div>

            <div class="control-group">
                <h3>2. COLOR</h3>
                <div class="color-swatch-container">
                    <div class="color-swatch swatch-white selected" onclick="changeColor('white')"></div>
                    <div class="color-swatch swatch-black" onclick="changeColor('black')"></div>
                    <div class="color-swatch swatch-red" onclick="changeColor('red')"></div>
                    <div class="color-swatch swatch-blue" onclick="changeColor('blue')"></div>
                    <div class="color-swatch swatch-grey" onclick="changeColor('grey')"></div>
                    <div class="color-swatch swatch-acid" onclick="changeColor('acid')"></div>
                </div>
            </div>

            <div class="control-group">
                <h3>3. SIZE</h3>
                <div class="option-grid" style="grid-template-columns: repeat(5, 1fr);">
                    <button class="lab-btn">S</button>
                    <button class="lab-btn selected">M</button>
                    <button class="lab-btn">L</button>
                    <button class="lab-btn">XL</button>
                    <button class="lab-btn">XXL</button>
                </div>
            </div>

            <div class="control-group">
                <h3>4. SELECT ZONE</h3>
                <p style="font-size: 0.8rem; color: #888; margin-bottom: 10px;">Click the visualizer box to select
                    active zone.</p>
                <div class="option-grid">
                    <button class="lab-btn selected" id="btn-zone-chest" onclick="selectZone('chest')">CHEST</button>
                    <button class="lab-btn" id="btn-zone-arm" onclick="selectZone('arm')">ARM</button>
                </div>
            </div>

            <div class="control-group">
                <h3>4. APPLY PREFAB</h3>
                <div class="prefab-grid">
                    <!-- Using existing assets as mock prefabs -->
                    <div class="prefab-item" onclick="applyPrefab('./assets/distressed_cap_logo.png')">
                        <img src="./assets/distressed_cap_logo.png">
                    </div>
                    <div class="prefab-item" onclick="applyPrefab('./assets/neon_ar.jpg')">
                        <img src="./assets/neon_ar.jpg">
                    </div>
                    <div class="prefab-item" onclick="applyPrefab('./assets/exclusive_hoodie_2.png')">
                        <img src="./assets/exclusive_hoodie_2.png">
                    </div>
                </div>
            </div>

            <button class="btn-add-large" style="margin-top: 20px;" onclick="generateBlueprint()">GENERATE
                BLUEPRINT</button>
        </div>
    </div>

    <!-- Blueprint Modal -->
    <div id="blueprint-modal" class="modal-overlay">
        <div class="blueprint-card">
            <div class="blueprint-header">
                <h3>JONI BOIS A-RT // OFFICIAL BLUEPRINT</h3>
                <p>PROTOTYPE ID: <span id="bp-id">#0000</span></p>
            </div>
            <div class="blueprint-body">
                <div class="bp-row"><span>BASE:</span> <span id="bp-base">WHITE TEE</span></div>
                <div class="bp-row"><span>SIZE:</span> <span id="bp-size">M</span></div>
                <div class="bp-row"><span>ZONE:</span> <span id="bp-zone">CHEST</span></div>
                <div class="bp-row"><span>ASSET:</span> <span id="bp-asset">CUSTOM</span></div>
                <div class="bp-divider"></div>
                <div class="bp-total">EST. COST: $85.00</div>
            </div>
            <div class="blueprint-footer">
                <p>TAKE A SCREENSHOT TO SAVE</p>
                <button onclick="closeBlueprint()">CLOSE</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Inline Lab Logic for simplicity/isolation
        let activeZone = 'chest';
        let currentBase = 'TEE (W)';
        let currentAsset = 'NONE';
        let currentColor = 'WHITE';

        function changeColor(color) {
            currentColor = color.toUpperCase();

            // Remove 'selected' from all swatches
            document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('selected'));
            event.target.classList.add('selected');

            // Apply Dye Class
            const dyeLayer = document.getElementById('dye-layer');
            dyeLayer.className = 'dye-overlay dye-' + color;
        }

        function changeBase(type) {
            const img = document.getElementById('lab-base-image');
            document.querySelectorAll('.lab-btn').forEach(b => {
                if (b.innerText.includes('TEE') || b.innerText.includes('HOODIE')) b.classList.remove('selected');
            });
            event.target.classList.add('selected');

            if (type === 'tee-white') { img.src = './assets/origins_white_tee_front.png'; currentBase = 'TEE (WHITE)'; }
            if (type === 'tee-black') { img.src = './assets/neon_tee.png'; currentBase = 'TEE (BLACK)'; }
            if (type === 'hoodie') { img.src = './assets/origins_hoodie_back.png'; currentBase = 'HOODIE (BLACK)'; }
        }

        function selectZone(zone) {
            activeZone = zone;
            document.querySelectorAll('.overlay-zone').forEach(z => z.classList.remove('active'));
            document.getElementById('zone-' + zone).classList.add('active');

            // Updates buttons
            document.getElementById('btn-zone-chest').classList.toggle('selected', zone === 'chest');
            document.getElementById('btn-zone-arm').classList.toggle('selected', zone === 'arm');
        }

        function applyPrefab(src) {
            const zoneEl = document.getElementById('zone-' + activeZone);
            zoneEl.innerHTML = `<img src="${src}" style="width: 100%; height: 100%; object-fit: contain;">`;
            currentAsset = src.split('/').pop();
        }

        function generateBlueprint() {
            document.getElementById('bp-id').innerText = '#' + Math.floor(Math.random() * 9999);
            document.getElementById('bp-base').innerText = currentBase;
            document.getElementById('bp-zone').innerText = activeZone.toUpperCase();
            document.getElementById('bp-asset').innerText = currentAsset;

            // Add Color to Receipt (Create element dynamically if not exists, or just append to Base)
            let colorRow = document.getElementById('bp-color-row');
            if (!colorRow) {
                const body = document.querySelector('.blueprint-body');
                const div = document.createElement('div');
                div.className = 'bp-row';
                div.id = 'bp-color-row';
                div.innerHTML = `<span>COLOR:</span> <span id="bp-color">WHITE</span>`;
                body.insertBefore(div, body.children[1]); // Insert after Base
            }
            document.getElementById('bp-color').innerText = currentColor;

            document.getElementById('blueprint-modal').classList.add('active');
        }

        function closeBlueprint() {
            document.getElementById('blueprint-modal').classList.remove('active');
        }

        // Zone click listeners
        document.getElementById('zone-chest').addEventListener('click', () => selectZone('chest'));
        document.getElementById('zone-arm-left').addEventListener('click', () => selectZone('arm'));

    </script>
</body>

</html>